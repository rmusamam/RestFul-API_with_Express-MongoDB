const express= require('express')
const router=express.Router()   
const Post= require('../model/PostSchema')

console.log('this is post getting on routes',Post);

router.get('/posts',async(req,res)=>{
    try {
        const post= await Post.find();
    res.send(post)
    }
    catch(err){
        res.send({message:err})
    }
})

router.post('/posts',async (req,res)=>{
    const post= new Post({
     title: req.body.title,
     content: req.body.content
    })


    const savedPost= await post.save();
    try{
        res.json(savedPost)
    }
    catch{
        console.log('error occured')
        res.json({message:err})
    }
})

// router.get('/update',(req,res)=>{
//     try{

//     }
// })
router.get('/findById/:postId',async(req,res)=>{
   
        try{const post= await Post.findById(req.params.postId);
        res.json(post)
        }
        catch(err)
        {
            res.json({message:err})
        }

   
})



module.exports=router